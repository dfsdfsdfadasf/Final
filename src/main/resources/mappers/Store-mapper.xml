<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

	<mapper namespace="Store">
	
	<!-- 게시글 불러오기 -->
	<select id="selectAll" resultType="dream.tk.dto.StoreDTO">
		select * from store order by grade desc
	</select>
	
	<select id="getSeq" resultType="int">
		select store_seq.nextval from dual
	</select>
	
	<select id="select" resultType="dream.tk.dto.StoreDTO">
		select * from store where Store_seq = ${value}
	</select>
	
	
	<select id="getPageList1" resultType="dream.tk.dto.StoreDTO">
		select * from (select row_number() over(order by store_seq desc) rnum, store_seq, city, store, phone, Road_name, count from store) where rnum between ${startNum} and ${endNum}
	</select>
	
	<select id="getPageList2" resultType="dream.tk.dto.StoreDTO">
		select * from (select row_number() over(order by store_seq desc) rnum, store_seq, city, store, phone, Road_name, store_X, store_y, count, report_count from store) where rnum between ${startNum} and ${endNum}
	</select>
	
		<select id="getRecordCount1" resultType="int">
		select count(*) from store
	</select>
	
	<select id="getRecordCount2" resultType="int">
		select count(*) from store where #{category} like '%${keyword}%'
	</select>
	
	<update id="count">
		update store set count = count+1 where store_seq = #{store_seq}
	</update>
	
	
</mapper>